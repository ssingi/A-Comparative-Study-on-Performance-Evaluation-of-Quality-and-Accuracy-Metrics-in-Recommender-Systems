# 추천 시스템 평가지표 완벽 가이드

## 초보자도 이해할 수 있는 12개 평가지표 설명

---

## 📚 **평가지표를 이해하기 위한 기본 개념**

### **시나리오: 영화 추천 시스템**

```
당신(사용자)이 영화를 5개 봤고, 모두 5점(최고 만족)을 줌:
✅ 아바타 (SF, 액션)
✅ 인셉션 (SF, 미스터리)
✅ 인터스텔라 (SF, 드라마)
✅ 토르 (액션, 판타지)
✅ 아이언맨 (액션, SF)

시스템이 당신을 위해 10개 영화를 추천:
1. 블레이드 러너 (SF) ✅ 당신이 좋아할 것 같은 영화!
2. 마션 (SF) ✅ 당신이 좋아할 것 같은 영화!
3. 로보콥 (액션) ✅ 당신이 좋아할 것 같은 영화!
4. 판도라 (판타지) ❌ 당신 취향과 안 맞음
5. 드래곤 길들이기 (판타지) ❌ 당신 취향과 안 맞음
6. 로맨틱 코미디 (코미디) ❌ 당신 취향과 안 맞음
7. 드라마영화1 (드라마) ⚠️ 약간 관련
8. 드라마영화2 (드라마) ⚠️ 약간 관련
9. 공포영화 (공포) ❌ 당신 취향과 안 맞음
10. 로맨스 (로맨스) ❌ 당신 취향과 안 맞음

당신이 실제로 본 모든 영화: 총 100개
이 중 좋아한 영화(5점): 30개
```

---

## 🎯 **12개 평가지표 상세 설명**

### **그룹 1: 정확도 지표 (RMSE, MAE)**

#### **1️⃣ RMSE (Root Mean Squared Error) - 근평균제곱오차**

**쉬운 설명:**
```
당신 영화 평점 예측이 얼마나 틀렸는지 측정
(특히 큰 오차에 페널티)
```

**예시:**
```
실제 평점: [5, 4, 2, 3, 5]
예측 평점: [5, 3, 3, 3, 4]
오차:      [0, 1, 1, 0, 1]

RMSE 계산:
1. 오차의 제곱: [0², 1², 1², 0², 1²] = [0, 1, 1, 0, 1]
2. 평균: (0+1+1+0+1) / 5 = 0.6
3. 제곱근: √0.6 = 0.77

RMSE = 0.77 (낮을수록 좋음 ✅)
```

**해석:**
```
- RMSE = 0.5 → 매우 좋음 (오차 0.5점 정도)
- RMSE = 1.0 → 좋음 (오차 1점)
- RMSE = 1.5 → 평범함 (오차 1.5점)
- RMSE = 2.0 → 나쁨 (오차 2점)
```

**왜 제곱하나?**
```
- 큰 오차를 더 크게 패널티
- 예: 1점 오차도 나쁘지만, 2점 오차는 4배 나쁨
```

---

#### **2️⃣ MAE (Mean Absolute Error) - 평균절대오차**

**쉬운 설명:**
```
예측 오차의 절대값 평균
(모든 오차를 동일하게 취급)
```

**예시:**
```
실제 평점: [5, 4, 2, 3, 5]
예측 평점: [5, 3, 3, 3, 4]
오차:      [0, 1, 1, 0, 1]

MAE 계산:
1. 오차의 절대값: [|0|, |1|, |1|, |0|, |1|] = [0, 1, 1, 0, 1]
2. 평균: (0+1+1+0+1) / 5 = 0.6

MAE = 0.6 (낮을수록 좋음 ✅)
```

**RMSE vs MAE:**
```
큰 오차가 하나 있을 때:
- 실제: [5, 4, 2], 예측: [5, 4, 1]
- 오차: [0, 0, 1]

RMSE = √((0² + 0² + 1²) / 3) = 0.58
MAE = (|0| + |0| + |1|) / 3 = 0.33

RMSE가 더 큼 → 큰 오차를 더 심각하게 봄
MAE는 작음 → 1점은 그냥 1점
```

**선택 기준:**
```
RMSE: 큰 오차를 피하고 싶을 때 (엄격함)
MAE: 평균적 오차가 중요할 때 (온화함)
```

---

### **그룹 2: 추천 정확도 지표 (Precision, Recall, F1)**

#### **3️⃣ Precision@10 - 정밀도 (추천 중 맞은 비율)**

**쉬운 설명:**
```
시스템이 추천한 10개 중에서
실제 좋은 영화(사용자가 좋아할 영화)가 몇 개인가?
```

**예시:**
```
시스템이 추천한 Top 10:
1. ✅ 블레이드 러너 - 당신이 좋아할 것
2. ✅ 마션 - 당신이 좋아할 것
3. ✅ 로보콥 - 당신이 좋아할 것
4. ❌ 판도라 - 당신 취향 아님
5. ❌ 로맨틱 코미디 - 당신 취향 아님
6. ❌ 공포영화 - 당신 취향 아님
7. ⚠️ 드라마영화1 - 약간 좋아할 것
8. ⚠️ 드라마영화2 - 약간 좋아할 것
9. ❌ 로맨스 - 당신 취향 아님
10. ❌ 판타지2 - 당신 취향 아님

좋은 추천: 3개 + 2개(약간) = 5개
전체 추천: 10개

Precision@10 = 5 / 10 = 0.5 (50%)
```

**해석:**
```
Precision = 0.1 (10%) → 매우 나쁨 (1개만 맞음)
Precision = 0.3 (30%) → 나쁨
Precision = 0.5 (50%) → 보통
Precision = 0.7 (70%) → 좋음
Precision = 0.9 (90%) → 매우 좋음
```

**현실 예시:**
```
Netflix 추천 리스트 10개 중:
- 현실적: 3~4개 정도 마음에 들어함
- Precision = 0.3~0.4
```

---

#### **4️⃣ Recall@10 - 재현율 (찾은 좋은 영화의 비율)**

**쉬운 설명:**
```
당신이 좋아할 영화가 총 30개인데,
시스템이 그 중 몇 개를 찾았나?
```

**예시:**
```
당신이 실제로 좋아할 모든 영화: 30개

시스템의 Top 10 추천 중 당신 취향 영화: 5개

Recall@10 = 5 / 30 = 0.167 (16.7%)

즉, 시스템이 당신의 좋은 영화 30개 중 5개만 찾음
```

**Precision vs Recall:**
```
🎯 목표: 10개 추천, 당신이 좋아할 영화 찾기

Precision = 추천이 정확한 정도
  "내가 추천한 것 중 몇 %가 맞았나?"
  좋은 추천의 질(Quality)

Recall = 놓친 것이 적은 정도  
  "좋은 영화 중 몇 %를 찾았나?"
  추천의 완성도(Coverage)
```

**트레이드오프:**
```
높은 Precision, 낮은 Recall:
- 매우 신중한 추천
- 확실한 것만 추천
- 예: 평점 5점 영화만 추천 (3개)
- Precision = 100%, Recall = 10%

낮은 Precision, 높은 Recall:
- 마구잡이 추천
- 모두에게 추천
- 예: 아무 영화나 10개 추천
- Precision = 30%, Recall = 100%

균형잡힌 추천:
- 적정 Precision과 Recall
- 예: Precision = 50%, Recall = 50%
```

---

#### **5️⃣ F1@10 - F1 스코어 (조화평균)**

**쉬운 설명:**
```
Precision과 Recall의 균형을 맞춘 점수
둘 다 높을 때 F1도 높음
```

**공식:**
```
F1 = 2 × (Precision × Recall) / (Precision + Recall)
```

**예시:**
```
Precision = 0.5
Recall = 0.167

F1 = 2 × (0.5 × 0.167) / (0.5 + 0.167)
   = 2 × 0.0835 / 0.667
   = 0.25
```

**해석:**
```
- 하나만 높으면 F1은 낮음
- 둘 다 높을 때만 F1이 높음

예시 1: Precision=0.9, Recall=0.1
F1 = 2×(0.9×0.1)/(0.9+0.1) = 0.18 (낮음)

예시 2: Precision=0.8, Recall=0.8
F1 = 2×(0.8×0.8)/(0.8+0.8) = 0.8 (높음)
```

**언제 쓰나?**
```
Precision과 Recall 모두 중요할 때
예: 스팸 필터 (False Positive, False Negative 모두 싫음)
```

---

### **그룹 3: 정보 검색 표준 지표**

#### **6️⃣ MAP@10 (Mean Average Precision)**

**쉬운 설명:**
```
순위를 고려한 정확도
앞에 좋은 영화가 있을수록 높은 점수
```

**예시:**
```
추천순위: [✅, ✅, ✅, ❌, ❌, ❌, ⚠️, ⚠️, ❌, ❌]

Precision 계산 (좋은 영화를 찾을 때마다):
1번째: ✅ → Precision@1 = 1/1 = 1.0
2번째: ✅ → Precision@2 = 2/2 = 1.0
3번째: ✅ → Precision@3 = 3/3 = 1.0
(나머지는 무시)

AP@10 = (1.0 + 1.0 + 1.0) / 전체좋은영화수
```

**핵심:**
```
앞에 좋은 영화: 높은 점수
뒤에 좋은 영화: 낮은 점수

즉, 순위가 중요!
```

---

#### **7️⃣ MRR@10 (Mean Reciprocal Rank)**

**쉬운 설명:**
```
첫 번째 좋은 영화까지의 순위
(역수를 취함)
```

**예시:**
```
시나리오 1: [❌, ✅, ✅, ✅, ❌, ...]
첫 좋은 영화: 2번째
MRR = 1 / 2 = 0.5

시나리오 2: [✅, ❌, ❌, ❌, ❌, ...]
첫 좋은 영화: 1번째
MRR = 1 / 1 = 1.0

시나리오 3: [❌, ❌, ❌, ❌, ❌, ..., ✅]
첫 좋은 영화: 10번째
MRR = 1 / 10 = 0.1
```

**해석:**
```
MRR = 1.0 → 첫 추천이 정확
MRR = 0.5 → 2번째에 정확한 추천
MRR = 0.1 → 10번째에 정확한 추천
MRR = 0 → 찾지 못함
```

**언제 쓰나?**
```
검색 엔진 평가
예: 원하는 답이 얼마나 빨리 나왔나?
```

---

#### **8️⃣ NDCG@10 (Normalized Discounted Cumulative Gain)**

**쉬운 설명:**
```
순위별 만족도를 합산하되,
뒤로 갈수록 가중치를 줄임
```

**예시:**
```
추천순위: [✅, ✅, ✅, ❌, ⚠️]

Gain(이득):
위치 1: ✅ = 1점
위치 2: ✅ = 1점
위치 3: ✅ = 1점
위치 4: ❌ = 0점
위치 5: ⚠️ = 0.5점

DCG(할인 누적 이득):
위치 1: 1 / log₂(1+1) = 1 / 1 = 1.0
위치 2: 1 / log₂(2+1) = 1 / 1.585 = 0.631
위치 3: 1 / log₂(3+1) = 1 / 2 = 0.5
위치 4: 0 / log₂(4+1) = 0
위치 5: 0.5 / log₂(5+1) = 0.5 / 2.585 = 0.193

DCG = 1.0 + 0.631 + 0.5 + 0 + 0.193 = 2.324

이상적인 순서: [✅, ✅, ✅, ⚠️, ❌]
아이디얼 DCG = 1.0 + 0.631 + 0.5 + 0.193 + 0 = 2.324

NDCG = DCG / 이상적DCG = 2.324 / 2.324 = 1.0 (최고)
```

**핵심:**
```
- 순위가 좋을수록 높은 점수
- 뒤로 갈수록 가중치 감소
- NDCG = 0 ~ 1.0
- 높을수록 좋음
```

---

### **그룹 4: 다양성 지표**

#### **9️⃣ Diversity (ILD - Intra-List Diversity)**

**쉬운 설명:**
```
추천 영화들이 서로 얼마나 다양한가?
(같은 장르만 추천하지는 않나?)
```

**예시:**
```
추천 1: [SF, SF, SF, SF, SF]
→ Diversity = 매우 낮음 (모두 같은 장르)

추천 2: [SF, 액션, 드라마, 로맨스, 공포]
→ Diversity = 매우 높음 (모두 다른 장르)
```

**계산:**
```
1. 영화들 간 유사도 계산
   - 비슷한 영화: 유사도 높음
   - 다른 영화: 유사도 낮음

2. 평균 비유사도 = Diversity
   - Diversity 0 = 모두 같은 영화
   - Diversity 1 = 모두 다른 영화
```

**왜 중요한가?**
```
사용자 입장: "항상 비슷한 영화만 추천하네..."
→ 질려감, 새로운 발견 없음

다양한 추천:
→ 취향 발견, 만족도 상승
```

---

#### **🔟 Coverage (커버리지)**

**쉬운 설명:**
```
시스템이 전체 영화 카탈로그를 
얼마나 골고루 추천하는가?
```

**예시:**
```
전체 영화: 10,000개
시스템이 추천한 서로 다른 영화: 5,000개
Coverage = 5,000 / 10,000 = 0.5 (50%)

높은 Coverage: 많은 영화를 활용
낮은 Coverage: 인기 영화만 반복
```

**문제점:**
```
낮은 Coverage 시스템:
- 항상 같은 영화만 추천
- 예: "추천해봤자 최고 인기영화만 나옴"

높은 Coverage 시스템:
- 숨겨진 좋은 영화 발견 가능
- 예: "새로운 영화 발견!"
```

---

#### **1️⃣1️⃣ Novelty (새로움)**

**쉬운 설명:**
```
시스템이 인기 없는, 새로운 영화를 추천하는가?
```

**예시:**
```
인기도:
- 아바타: 평가 50,000명 (매우 인기)
- 인셉션: 평가 40,000명 (인기)
- 숨겨진 명작: 평가 100명 (미지의 보석)

Novelty 높은 추천:
- 숨겨진 명작 추천
- "이런 영화가 있었어?"

Novelty 낮은 추천:
- 항상 아바타, 인셉션 같은 인기영화만
- "이미 다 알고 있는데..."
```

**계산:**
```
Novelty = -log₂(인기도)

인기도 높음(0.5):
  Novelty = -log₂(0.5) = 1 (낮음)

인기도 낮음(0.01):
  Novelty = -log₂(0.01) = 6.64 (높음)
```

---

#### **1️⃣2️⃣ PopularityBias (인기도 편향)**

**쉬운 설명:**
```
시스템이 인기 있는 영화만 추천하는 경향
```

**예시:**
```
추천 10개의 평균 인기도:

높은 PopularityBias:
[아바타, 아바타2, 인셉션, 타이타닉, 아이언맨]
→ 모두 초인기 영화
→ 특이성 없음

낮은 PopularityBias:
[숨겨진명작, 인디영화, 아바타, 드라마, 다큐]
→ 다양한 인기도 영화
→ 개인화됨
```

**문제점:**
```
높은 편향 = 좋지 않음:
- 누가나 같은 추천
- 개인화 X
- 사용자 차별화 X

낮은 편향 = 좋음:
- 개인 맞춤 추천
- 유니크한 추천
```

---

## 📊 **12개 지표 한눈에 보기**

| 그룹 | 지표 | 의미 | 범위 | 좋은 값 |
|------|------|------|------|--------|
| **정확도** | RMSE | 오차 정도 | 0~ | 낮을수록 ✅ |
| | MAE | 평균 오차 | 0~ | 낮을수록 ✅ |
| **추천 정확도** | Precision | 추천 중 맞은 비율 | 0-1 | 높을수록 ✅ |
| | Recall | 찾은 좋은 영화 비율 | 0-1 | 높을수록 ✅ |
| | F1 | 균형 점수 | 0-1 | 높을수록 ✅ |
| **순위** | MAP | 순위 고려 정확도 | 0-1 | 높을수록 ✅ |
| | MRR | 첫 정확도까지 거리 | 0-1 | 높을수록 ✅ |
| | NDCG | 순위별 만족도 | 0-1 | 높을수록 ✅ |
| **다양성** | Diversity | 추천 다양성 | 0-1 | 높을수록 ✅ |
| | Coverage | 카탈로그 활용 | 0-1 | 높을수록 ✅ |
| | Novelty | 새로운 영화 비율 | 0~ | 높을수록 ✅ |
| | PopBias | 인기도 편향 | 0-1 | 낮을수록 ✅ |

---

## 🎓 **실전 해석 예시**

### **결과 1: 좋은 시스템**
```
RMSE=1.0, Precision=0.6, NDCG=0.5, Diversity=0.7, Coverage=0.5, Novelty=3.0
→ 정확하고, 다양하고, 새로운 추천
```

### **결과 2: 나쁜 시스템**
```
RMSE=2.0, Precision=0.1, NDCG=0.05, Diversity=0.2, Coverage=0.05, Novelty=1.0
→ 정확하지 않고, 인기 영화만, 단조로움
```

### **결과 3: 균형잡힌 시스템**
```
RMSE=1.2, Precision=0.4, NDCG=0.3, Diversity=0.5, Coverage=0.4, Novelty=2.5
→ 모든 면에서 중간 이상
```

---

**이제 모든 평가지표를 이해했습니다!** 🎉